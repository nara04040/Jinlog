---
title: "네트워크 기초"
date: "2024-11-24"
author: "Jin"
description: "네트워크의 핵심 개념부터 실무 활용까지 상세히 알아봅니다"
category: "Computer Science"
tags: ["Network", "CS", "TCP/IP", "OSI"]
series: "cs-series"
seriesOrder: 1
imageUrl: "/network.webp"
---

## 목차

### 1. 네트워크 기초 개념
- 네트워크란 무엇인가?
- 네트워크의 종류와 특징
- 주요 네트워크 용어 정리

### 2. OSI 7계층과 TCP/IP 4계층
- OSI 7계층 개요
- 각 계층별 주요 기능과 프로토콜
- TCP/IP 4계층과의 비교
- 실제 통신 과정 예시

### 3. IP 주소와 도메인
- IPv4와 IPv6
- 공인 IP와 사설 IP
- 서브넷과 서브넷 마스크
- DNS와 작동 원리

### 4. TCP와 UDP
- TCP의 특징과 작동 방식
- 3-way handshake와 4-way handshake
- UDP의 특징과 사용 사례
- TCP vs UDP 비교

---


## 1. 네트워크 기초 개념

### 네트워크란 무엇인가?

네트워크는 우리의 일상생활과 밀접하게 연결되어 있습니다. 마치 도시의 도로망처럼, 컴퓨터 네트워크는 정보가 오가는 디지털 고속도로라고 할 수 있습니다.

#### 정의
네트워크란  *둘 이상의 컴퓨터나 디바이스가 서로 데이터를 주고받을 수 있도록 연결된 통신 체계* 를 의미합니다. 이는 물리적 케이블부터 무선 신호까지 다양한 방식으로 구현될 수 있습니다.

#### 네트워크의 목적
1. **리소스 공유**: 프린터나 저장장치와 같은 하드웨어 자원 공유
2. **데이터 교환**: 파일, 메시지 등의 정보 교환
3. **통신**: 이메일, 메신저 등을 통한 실시간 커뮤니케이션
4. **중앙 관리**: 데이터와 리소스의 효율적인 관리와 보안

#### 핵심 특징
- **연결성**: 물리적 또는 논리적으로 연결된 구조
- **통신**: 표준화된 프로토콜을 통한 데이터 교환
- **장성**: 필요에 따라 네트워크 규모 확장 가능
- **신뢰성**: 데이터 전송의 정확성과 안정성 보장


### 네트워크의 종류와 특징

🌐 네트워크는 우리가 사는 도시처럼, 네트워크도 다양한 크기와 목적을 가진 구조들이 있습니다.

#### 1. 규모에 따른 분류

##### 🏠 PAN (Personal Area Network)
- 가장 작은 규모의 네트워크
- 예시 : 블루투스 이어폰, 스마트워치
- 통신 범위: 약 10m 이내

##### 🏢 LAN (Local Area Network)
- 가정집, 회사 내부에서 사용하는 네트워크
- 제한된 공간에서 빠른 속도로 통신가능
- 통신 범위: 건물 또는 캠퍼스 내

##### 🌆 MAN (Metropolitan Area Network)
- 도시 규모에서 사용되는  네트워크랍니다
- 여러 개의 LAN을 연결한 더 큰 네트워크
- 통신 범위: 도시 전체

##### 🌏 WAN (Wide Area Network)
- 가장 큰 규모의 네트워크이자 "인터넷"이 대표적 네트워크
- 통신 범위: 국가 간, 대륙 간

#### 2. 연결 방식에 따른 분류

##### 🔌 유선 네트워크
- 특징: 안정적이고 빠른 속도
- 장점: 보안성이 뛰어나고 날씨의 영향을 덜 받는다.
- 단점: 설치가 번거롭고 이동이 제한적

##### 📡 무선 네트워크
- 특징: 자유로운 동성과 편리한 설치
- 장점: 어디서나 접속 가능한 편리함
- 단점: 속도와 안정성이 상대적으로 떨어질 수 있다.

> 💡 **실무 활용 Tip**  
> 개발자로서 각 네트워크의 특성을 이해하면 서비스 설계 시 최적의 네트워크 구조를 선택할 수 있습니다. 예를 들어, 실시간 게임 서버는 LAN의 특성을, 글로벌 서비스는 WAN의 특성을 고려해야 합니다.

### 주요 네트워크 용어 정리

네트워크를 이해하고 실무에서 활용하기 위해 알아야 할 핵심 용어들을 정리했습니다.

#### 기본 용어

##### 1. 노드(Node)와 호스트(Host)
- **노드**: 네트워크에 연결된 모든 장치
- **호스트**: IP 주소를 가지고 있는 네트워크 장치
- **엔드포인트**: 네트워크의 말단에 위치한 장치 (클라이언트, 서버 등)

##### 2. 프로토콜(Protocol)
- 네트워크 상에서 데이터를 주고받기 위한 규칙과 약속
- 주요 프로토콜: HTTP, TCP/IP, FTP, SMTP 등
- 각 계층별로 다양한 프로토콜이 존재

##### 3. 패킷(Packet)
- 네트워크에서 전송되는 데이터의 기본 단위
- 헤더(제어 정보)와 페이로드(실제 데이터)로 구성
- MTU(Maximum Transmission Unit)에 의해 크기가 제한됨

#### 인프라 관련 용어

##### 1. 네트워크 장비
- **라우터(Router)**: 네트워크 간 경로 설정 및 데이터 전달
- **스위치(Switch)**: 동일 네트워크 내 장치 간 데이터 전송
- **허브(Hub)**: 여러 장치를 연결하는 단순 중계 장치
- **게이트웨이(Gateway)**: 서로 다른 프로토콜 간 변환 역할

##### 2. 네트워크 주소 체계
- **IP 주소**: 네트워크 상의 고유 식별자
- **MAC 주소**: 네트워크 인터페이스의 고유 식별자
- **포트(Port)**: 특정 서비스나 프로세스를 식별하는 번호

#### 성능 관련 용어

##### 1. 대역폭과 속도
- **대역폭(Bandwidth)**: 데이터 전송 용량
- **지연시간(Latency)**: 데이터 전송에 걸리는 시간
- **처리량(Throughput)**: 실제 전송된 데이터양

##### 2. 품질 관련
- **QoS(Quality of Service)**: 네트워크 서비스 품질 보장
- **병목현상(Bottleneck)**: 네트워크 성능 저하 구간
- **페이스팅(Pacing)**: 데이터 전송 속도 조절

> 💡 **실무 적용 Point**  
> - 네트워크 문제 발생 시 위 용어들을 기반으로 트러블슈팅
> - 시스템 설계 시 각 용어가 의미하는 특성 고려
> - 성능 최적화 시 관련 지표들을 모니터링

#### 보안 관련 용어

##### 1. 보안 기술
- **방화벽(Firewall)**: 네트워크 트래픽 필터링
- **VPN(Virtual Private Network)**: 가상 사설망
- **SSL/TLS**: 보안 통신을 위한 암호화 프로토콜

##### 2. 보안 위협
- **DDoS**: 분산 서비스 거부 공격
- **스니핑(Sniffing)**: 네트워크 트래픽 감청
- **스푸핑(Spoofing)**: 발신자 정보 위조

이러한 용어들은 실제 개발 환경에서 시스템 설계, 문제 해결, 팀 커뮤니케이션에 필수적입니다. 특히 마이크로서비스 아키텍처나 클라우드 환경에서는 이러한 개념들의 이해가 더욱 중요해지고 있습니다.


## 2. OSI 7계층과 TCP/IP 4계층

### OSI 7계층 개요

OSI(Open Systems Interconnection) 모델은 국제표준화기구(ISO)에서 개발한 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명한 개방형 시스템 상호 연결 모델입니다.

#### OSI 7계층을 나눈 이유

1. **복잡성 감소**
   - 네트워크 통신 과정을 독립적인 계층으로 분할
   - 각 계층별 표준화를 통한 이해도 향상
   - 문제 발생 시 특정 계층만 집중적으로 확인 가능

2. **유지보수성 향상**
   - 계층별 독립적인 업데이트와 수정 가능
   - 한 계층의 변경이 다른 계층에 영향을 미치지 않음

3. **표준화**
   - 제조사나 벤더에 관계없이 일관된 통신 구조 제공
   - 네트워크 장비와 프로토콜의 호환성 보장
   - 글로벌 표준으로서의 역할 수행

#### 계층 구조의 특징

1. **계층별 독립성**
   - 각 계층은 하위 계층의 서비스를 이용
   - 상위 계층에 서비스를 제공
   - 인접한 계층 간에만 상호작용

2. **인터페이스**
   - 각 계층 간 표준화된 인터페이스 존재
   - 계층 간 데이터 전달 방식 정의
   - 프로토콜 독립성 보장

3. **캡슐화와 역캡슐화**
   - 상위 계층에서 하위 계층으로 데이터 전달 시 헤더 추가 (캡슐화)
   - 수신 측에서 역순으로 헤더 제거 (역캡슐화)

#### 데이터 흐름

```ascii
[응용 계층(7)] → PDU: 데이터
↓
[표현 계층(6)] → PDU: 데이터
↓
[세션 계층(5)] → PDU: 데이터
↓
[전송 계층(4)] → PDU: 세그먼트
↓
[네트워크 계층(3)] → PDU: 패킷
↓
[데이터링크 계층(2)] → PDU: 프레임
↓
[물리 계층(1)] → PDU: 비트
```


> 💡 **Point**  
> - 네트워크 문제 발생 시 OSI 7계층 모델을 기준으로 문제 구간 특정
> - 각 계층별 대표적인 프로토콜과 장비 이해
> - 보안 솔루션 구축 시 각 계층별 보안 요구사항 파악

#### 계층별 주요 보안 고려사항

- **응용 계층**: 인증, 데이터 암호화
- **전송 계층**: SSL/TLS, 세션 관리
- **네트워크 계층**: 방화벽, IPSec
- **데이터링크 계층**: MAC 필터링, 포트 보안

이러한 OSI 7계층에 대한 이해는 현대 네트워크 아키텍처를 이해하고 문제를 해결하는 데 필수적인 기반 지식이 됩니다. 특히 클라우드 환경과 마이크로서비스 아키텍처에서는 각 계층의 특성을 고려한 설계가 더욱 중요해지고 있습니다.

### 각 계층별 주요 기능과 프로토콜

각 계층은 특정한 네트워크 작업을 처리하도록 설계되었으며, 계층별로 표준화된 프로토콜을 통해 통신이 이루어집니다.

#### 1. 물리 계층 (Physical Layer)

**정의**
- 네트워크의 기본 하드웨어 전송 기술을 담당
- 데이터를 전기 신호로 변환하여 주고받는 역할 수행

**필요성**
- 다양한 하드웨어 간의 호환성 보장
- 신뢰성 있는 데이터 전송의 기반 제공
- 물리적 매체를 통한 비트 전송 표준화

**주요 기능과 구현**
1. 비트 단위의 데이터를 전송
   - 전기적 신호(유선) 또는 전파(무선)로 변환
   - 신호 인코딩과 디코딩
2. 전송 매체 물리적 특성 정의
   - 핀의 배치
   - 전압 레벨
   - 케이블 규격

**관련 장비와 매체**
- 리피터, 허브
- 네트워크 케이블 (UTP, 광섬유)
- 무선 주파수

#### 2. 데이터 링크 계층 (Data Link Layer)

**정의**
- 물리적 네트워크를 통한 직접 연결된 두 노드 간의 데이터 전송 담당
- 프레임 단위로 데이터 관리

**필요성**
- 물리 계층의 오류 검출 및 수정
- 네트워크 자원에 대한 접근 제어
- 흐름 제어를 통한 데이터 전송 신뢰성 확보

**주요 기능과 구현**
1. 프레임화(Framing)
   ```
   [프레임 시작] [데이터] [오류 검출 비트] [프레임 끝]
   ```
2. 오류 제어
   - CRC(Cyclic Redundancy Check) 활용
   - 손상된 프레임 감지 및 재전송
3. 흐름 제어
   - 송신자와 수신자 간의 데이터 전송 속도 조절
   - 버퍼 오버플로우 방지

**주요 프로토콜**
- Ethernet
- PPP (Point-to-Point Protocol)
- MAC (Media Access Control)

#### 3. 네트워크 계층 (Network Layer)

**정의**
- 서로 다른 네트워크 간의 통신을 가능하게 하는 계층
- 데이터 패킷의 경로 설정(라우팅)을 담당

**필요성**
- 복잡한 네트워크 토폴로지에서의 데이터 전송 경로 결정
- 네트워크 간의 상호 연결성 제공
- 트래픽 제어 및 혼잡 관리

**주요 기능과 구현**
1. 라우팅
   ```
   1. 목적지 주소 확인
   2. 라우팅 테이블 참조
   3. 최적 경로 선택
   4. 패킷 전달
   ```
2. 논리적 주소 지정
   - IP 주소 할당
   - 서브넷 구성

**주요 프로토콜**
- IPv4, IPv6
- ICMP (Internet Control Message Protocol)
- IGMP (Internet Group Management Protocol)

#### 4. 전송 계층 (Transport Layer)

**정의**
- 종단 간(End-to-End) 통신을 제어
- 신뢰성 있는 데이터 전송을 보장

**필요성**
- 응용 프로그램 간의 신뢰성 있는 데이터 전송
- 데이터 무결성 보장
- 포트를 통한 프로세스 구분

**주요 기능과 구현**
1. 연결 제어
   ```
   TCP 연결 설정:
   1. SYN (클라이언트 → 서버)
   2. SYN+ACK (서버 → 클라이언트)
   3. ACK (클라이언트 → 서버)
   ```
2. 신뢰성 있는 전송
   - 순서 제어
   - 오류 검출
   - 흐름 제어

**주요 프로토콜**
- TCP (Transmission Control Protocol)
- UDP (User Datagram Protocol)
- SCTP (Stream Control Transmission Protocol)

> 💡 **Point**  
> - TCP vs UDP 선택 시 애플리케이션의 요구사항 고려
> - 네트워크 문제 해결 시 계층별 프로토콜 동작 확인
> - 보안 설계 시 각 계층의 프로토콜 특성 이해 필요

#### 5. 세션 계층 (Session Layer)

**정의**
- 애플리케이션 간의 대화(세션) 관리
- 통신 연결의 설정, 유지, 종료를 담당

**필요성**
- 지속적인 애플리케이션 간의 연결 유지
- 데이터 교환의 동기화
- 장애 발생 시 복구 지원

**주요 기능과 구현**
1. 세션 관리
   ```
   세션 수명주기:
   1. 세션 설정 (연결 성립)
   2. 데이터 전송 (대화)
   3. 세션 종료 (연결 종료)
   ```
2. 동기화
   - 체크포인트 설정
   - 장애 발생 시 최근 체크포인트부터 재개
   - 전이중(Full-duplex)/반이중(Half-duplex) 통신 제어

**주요 프로토콜**
- NetBIOS
- RPC (Remote Procedure Call)
- SQL

#### 6. 표현 계층 (Presentation Layer)

**정의**
- 데이터의 형식(Format)과 표현 방식을 담당
- 애플리케이션 계층의 데이터 형식을 통일된 형식으로 변환

**필요성**
- 다양한 데이터 형식의 호환성 보장
- 데이터 암호화/복호화
- 효율적인 데이터 압축/압축해제

**주요 기능과 구현**
1. 데이터 변환
   ```
   변환 과정 예시:
   1. 문자 인코딩 (ASCII, Unicode)
   2. 이미지 형식 변환 (JPEG, PNG)
   3. 동영상 코덱 처리 (H.264, VP9)
   ```
2. 보안
   - 데이터 암호화/복호화
   - SSL/TLS 프로토콜 지원
   - 디지털 서명

**주요 프로토콜과 표준**
- JPEG, MPEG
- SSL/TLS
- ASCII, Unicode

#### 7. 응용 계층 (Application Layer)

**정의**
- 사용자와 직접 상호작용하는 네트워크 애플리케이션을 지원
- 최종 사용자의 네트워크 접근점 역할

**필요성**
- 다양한 네트워크 서비스 제공
- 사용자 인터페이스 제공
- 애플리케이션 간의 표준화된 통신

**주요 기능과 구현**
1. 네트워크 서비스
   ```
   주요 서비스 예시:
   - 웹 서비스 (HTTP/HTTPS)
   - 이메일 (SMTP, POP3, IMAP)
   - 파일 전송 (FTP, SFTP)
   - 도메인 변환 (DNS)
   ```
2. 사용자 인증과 권한 관리
   - 로그인 프로세스
   - 접근 권한 제어
   - 보안 정책 적용

**주요 프로토콜**
- HTTP/HTTPS
- FTP/SFTP
- SMTP, POP3, IMAP
- DNS, DHCP
- SSH, Telnet

#### 상위 계층(5-7계층)의 특징

1. **추상화 수준**
   - 하위 계층의 복잡한 네트워크 동작을 추상화
   - 개발자가 쉽게 네트워크 기능을 구현할 수 있도록 지원

2. **서비스 지향**
   - 최종 사용자와 애플리케이션을 위한 서비스 제공
   - 다양한 네트워크 서비스의 표준화된 인터페스트 제공

3. **보안과 데이터 관리**
   - 데이터의 표현과 암호화
   - 세션 관리와 사용자 인증
   - 애플리케이션 레벨의 보안 정책 적용

이러한 상위 계층들은 현대의 웹 애플리케이션과 클라우드 서비스에서 매우 중요한 역할을 합니다. 특히 마이크로서비스 아키텍처와 API 기반 통신이 보편화되면서, 이들 계층에 대한 이해가 더욱 중요해지고 있습니다.

> 💡 **Point**  
> - 응용 계층 프로토콜 선택 시 보안성 고려
> - RESTful API 설계 시 HTTP 메서드의 특성 이해
> - 이메일 서버 구축 시 관련 프로토콜의 동작 방식 파악

### TCP/IP 4계층과의 비교

TCP/IP 프로토콜 스택은 실제 인터넷에서 사용되는 표준 프로토콜입니다. OSI 7계층이 이론적 모델이라면, TCP/IP는 실무에서 실제로 사용되는 모델입니다.

#### 계층 구조 비교

```ascii
[OSI 7계층]           [TCP/IP 4계층]
응용 계층(7)  ─┐
표현 계층(6)   ├─→ 응용 계층
세션 계층(5)  ─┘     (Application)

전송 계층(4)   ──→ 전송 계층
                    (Transport)

네트워크 계층(3) ──→ 인터넷 계층
                    (Internet)

데이터링크 계층(2) ┐
물리 계층(1)      ┴─→ 네트워크 접근 계층
                      (Network Access)
```

#### TCP/IP 각 계층별 특징

##### 1. 응용 계층 (Application Layer)
- OSI 7계층의 응용, 표현, 세션 계층을 통합
- 사용자와 가장 가까운 계층
- **주요 프로토콜**
  - HTTP/HTTPS: 웹 통신
  - FTP: 파일 전송
  - SMTP/POP3: 이메일
  - DNS: 도메인 이름 해석

##### 2. 전송 계층 (Transport Layer)
- OSI 전송 계층과 동일한 역할
- 종단간 통신 제어
- **주요 프로토콜**
  - TCP: 신뢰성 있는 연결 지향형 통신
  - UDP: 비연결형 데이터그램 통신

##### 3. 인터넷 계층 (Internet Layer)
- OSI 네트워크 계층에 해당
- 패킷의 라우팅과 전달 담당
- **주요 프로토콜**
  - IP: 패킷 전달
  - ICMP: 오류 보고 및 제어
  - ARP: IP주소와 MAC주소 매핑

##### 4. 네트워크 접근 계층 (Network Access Layer)
- OSI 데이터링크, 물리 계층을 통합
- 하드웨어 인터페이스와 물리적 전송 담당
- **관련 기술**
  - Ethernet
  - Wi-Fi
  - PPP

#### OSI 모델과 TCP/IP 모델의 주요 차이점

| 구분 | OSI 모델 | TCP/IP 모델 |
|------|----------|-------------|
| 계층 수 | 7계층 | 4계층 |
| 접근 방식 | 프로토콜과 독립적인 이론적 모델 | 특정 프로토콜 중심의 실용 모델 |
| 개발 | ISO에서 개발 | 미국 국방부 주도로 개발 |
| 사용 | 네트워크 학습과 문제해결에 유용 | 실제 인터넷 통신의 표준 |
| 유연성 | 계층간 기능이 명확히 구분됨 | 계층 구분이 유연함 |

#### 실무에서의 활용

1. **문제 해결 관점**
   - OSI 모델: 문제 발생 시 계층별 체계적 분석 가능
   - TCP/IP 모델: 실제 프로토콜 중심의 문제 해결

2. **개발 관점**
   - OSI 모델: 네트워크 기능의 논리적 설계에 활용
   - TCP/IP 모델: 실제 구현과 프로토콜 스택 운영에 활용

3. **보안 관점**
   - OSI 모델: 각 계층별 보안 요구사항 분석
   - TCP/IP 모델: 실제 보안 솔루션 구현과 적용

> 💡 **Point**  
> - 두 모델의 차이점과 각각의 장단점 이해
> - 실무에서는 TCP/IP 모델을 기반으로 구현하되, OSI 모델을 참조하여 문제 해결
> - 네트워크 아키텍처 설계 시 두 모델의 특성을 고려한 접근 필요

### 실제 통신 과정 예시

웹 브라우저에서 "https://www.example.com"에 접속하는 과정을 통해 각 계층별 데이터 처리 과정을 살펴보겠습니다.

#### 데이터 송신 과정 (클라이언트 → 서버)

```ascii
[클라이언트]                                    [계층]           [데이터 변화]
브라우저에서 URL 입력 ─────────────────────┐
                                           │
DNS 조회로 IP 주소 확인                    ├─→ 응용 계층       HTTP 요청 생성
HTTPS 요청 메시지 생성                     │    (7,6,5)       
                                           ┘
                                          ┌
TCP 연결 설정 (3-way handshake)           ├─→ 전송 계층       TCP 헤더 추가
포트 번호 할당 (예: 443)                  │    (4)           (출발/도착 포트)
                                          ┘
                                          ┌
IP 주소 기반 라우팅                       ├─→ 네트워크 계층    IP 헤더 추가
패킷 분할 필요시 분할                     │    (3)            (출발/도착 IP)
                                          ┘
                                          ┌                     이더넷 헤더/
MAC 주소 결정 (ARP)                       ├─→ 데이터링크 계층   트레일러 추가
프레임 생성                               │    (2)              (출발/도착 MAC)
                                          ┘
                                          ┌
전기 신호로 변환                          ├─→ 물리 계층        비트열로 변환
네트워크 케이블로 전송                    │    (1)             전기 신호 전송
                                          ┘
```

#### 데이터 수신 과정 (서버 → 클라이언트)

```ascii
[서버]                                        [계층]           [처리 내용]
물리적 신호 수신 ──────────────────────────┐
                                           ├─→ 물리 계층       비트열 수신
                                           │    (1)           전기 신호 해석
                                           ┘
                                          ┌
프레임 검사                               ├─→ 데이터링크 계층   이더넷 헤더 제거
오류 검출                                 │    (2)              MAC 주소 확인
                                          ┘
                                          ┌
IP 패킷 추출                              ├─→ 네트워크 계층    IP 헤더 분석
목적지 IP 확인                            │    (3)             패킷 재조립
                                          ┘
                                          ┌
TCP 세그먼트 추출                         ├─→ 전송 계층       TCP 헤더 처리
포트 번호로 서비스 식별                   │    (4)             순서 제어
                                          ┘
                                          ┌
HTTP 요청 해석                            ├─→ 응용 계층       웹 서버 처리
웹 페이지 데이터 준비                     │    (7,6,5)      HTTP 응답 생성
                                          ┘
```

#### 주요 프로토콜별 처리 과정

##### 1. DNS 조회
```
1. 로컬 DNS 캐시 확인
2. DNS 서버에 쿼리 전송
3. 도메인 이름을 IP 주소로 변환
4. 결과 캐시에 저장
```

##### 2. TCP 3-way Handshake
```
클라이언트 ──[SYN]──────────→ 서버
클라이언트 ←─[SYN+ACK]────── 서버
클라이언트 ──[ACK]──────────→ 서버
```

##### 3. TLS Handshake (HTTPS의 경우)
```
1. 클라이언트 Hello (지원하는 암호화 방식 전달)
2. 서버 Hello (인증서 및 선택된 암호화 방식 전달)
3. 키 교환 및 암호화 통신 시작
```

#### 데이터 캡슐화/역캡슐화 예시

```ascii
[송신 측 캡슐화]
데이터
↓
TCP 헤더 + 데이터
↓
IP 헤더 + TCP 헤더 + 데이터
↓
이더넷 헤더 + IP 헤더 + TCP 헤더 + 데이터 + 트레일러

[수신 측 역캡슐화]
이더넷 헤더 + IP 헤더 + TCP 헤더 + 데이터 + 트레일러
↓
IP 헤더 + TCP 헤더 + 데이터
↓
TCP 헤더 + 데이터
↓
데이터
```

> 💡 **Point**  
> - 각 계층은 독립적으로 동작하며 자신의 역할만 수행
> - 상위 계층의 데이터는 하위 계층에서 페이로드로 취급
> - 문제 발생 시 해당 계층의 프로토콜만 확인하면 됨

#### 실무 디버깅 관점

1. **응용 계층 문제**
   - HTTP 상태 코드 확인
   - 웹 서버 로그 분석
   - API 응답 데이터 검증

2. **전송 계층 문제**
   - TCP 연결 상태 확인
   - 포트 오픈 여부 검증
   - Wireshark로 패킷 분석

3. **네트워크 계층 문제**
   - ping으로 연결성 테스트
   - traceroute로 경로 추적
   - 라우팅 테이블 확인

4. **물리/데이터링크 계층 문제**
   - 케이블 연결 상태 확인
   - 네트워크 인터페이스 상태 점검
   - MAC 주소 충돌 검사

## 3. IP 주소와 도메인

### IPv4와 IPv6

IP(Internet Protocol) 주소는 인터넷에 연결된 모든 장치를 식별하는 고유한 주소입니다. 현재는 IPv4와 IPv6 두 가지 버전이 공존하고 있습니다.

#### IPv4 (Internet Protocol version 4)

**구조와 특징**
- 32비트(4바이트) 주소 체계
- 점으로 구분된 4개의 8비트 옥텟으로 표현
- 예: `192.168.0.1`
- 총 약 43억개(2^32)의 주소 공간

**주소 클래스**
```
Class A: 0.0.0.0 ~ 127.255.255.255    (대규모 네트워크)
Class B: 128.0.0.0 ~ 191.255.255.255  (중규모 네트워크)
Class C: 192.0.0.0 ~ 223.255.255.255  (소규모 네트워크)
Class D: 224.0.0.0 ~ 239.255.255.255  (멀티캐스트)
Class E: 240.0.0.0 ~ 255.255.255.255  (예약된 주소)
```

**장단점**
- 장점:
  - 간단한 구조로 이해하기 쉬움
  - 대부분의 네트워크 장비가 지원
  - 광범위한 호환성
- 단점:
  - 주소 공간 부족
  - NAT 사용으로 인한 복잡성
  - 보안 기능이 선택적

#### IPv6 (Internet Protocol version 6)

**구조와 특징**
- 128비트(16바이트) 주소 체계
- 콜론으로 구분된 8개의 16비트 블록으로 표현
- 예: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
- 약 340간(2^128)의 주소 공간

**주소 표기법**
```
기본 형식: 2001:0db8:85a3:0000:0000:8a2e:0370:7334
축약 규칙:
1. 선행 0 생략: 0db8 → db8
2. 연속된 0 블록을 :: 로 대체 (한 번만 사용 가능)
예: 2001:db8::8a2e:370:7334
```

**주소 유형**
- **유니캐스트**: 단일 인터페이스 식별
- **멀티캐스트**: 그룹 통신
- **애니캐스트**: 가장 가까운 노드로 라우팅

**장점**
1. **거대한 주소 공간**
   - NAT 없이 모든 장치에 공인 IP 할당 가능
   - IoT 시대의 요구사항 충족

2. **향상된 보안**
   - IPSec 프로토콜 기본 탑재
   - 엔드-투-엔드 암호화 지원

3. **효율적인 라우팅**
   - 단순화된 헤더 구조
   - 더 나은 QoS 지원

4. **자동 구성**
   - 플러그 앤 플레이 지원
   - DHCP 없이도 주소 자동 설정 가능

#### IPv4에서 IPv6로의 전환

**전환 방식**
1. **듀얼 스택**
   ```
   애플리케이션 계층
         ↓
   [IPv4 스택 | IPv6 스택]
         ↓
   네트워크 인터페이스
   ```

2. **터널링**
   ```
   IPv6 패킷
      ↓
   IPv4 네트워크를 통한 캡슐화
      ↓
   목적지에서 역캡슐화
   ```

3. **주소 변환**
   - NAT64: IPv6 ↔ IPv4 변환
   - DNS64: 도메인 이름 해석 지원

> 💡 **Point**  
> - 새로운 서비스 설계 시 IPv6 지원 고려
> - 기존 IPv4 인프라와의 호환성 확인
> - 전환 계획 수립 시 단계적 접근 필요

#### 실무 적용 사례

1. **웹 서비스 구축**
   - 듀얼 스택 웹 서버 구성
   - CDN의 IPv6 지원 확인
   - DNS 레코드 설정 (A, AAAA)

2. **네트워크 설계**
   - 주소 할당 계획 수립
   - 라우팅 프로토콜 선택
   - 보안 정책 수립

3. **모니터링과 트러블슈팅**
   - IPv6 트래픽 모니터링
   - 연결성 테스트 (ping6, traceroute6)
   - 보안 로그 분석

### 공인 IP와 사설 IP

인터넷에서 사용되는 IP 주소는 공인(Public) IP와 사설(Private) IP로 구분됩니다. 이는 IPv4 주소 부족 문제를 해결하고 보안을 강화하기 위한 중요한 개념입니다.

#### 공인 IP (Public IP)

**정의**
- 인터넷 상에서 공식적으로 할당된 고유한 주소
- ISP(Internet Service Provider)에서 제공하는 전 세계적으로 유일한 주소
- 직접적인 인터넷 통신이 가능한 주소

**특징**
1. **유일성**
   - 전 세계에서 중복 없이 유일하게 사용
   - 인터넷 상에서 직접 라우팅 가능

2. **관리와 할당**
   - ICANN에서 전체 IP 주소 관리
   - 지역별 인터넷 주소 관리기관(RIR)을 통한 할당
   - ISP를 통해 최종 사용자에게 제공

3. **비용**
   - 일반적으로 유료로 제공
   - 고정 IP의 경우 추가 비용 발생

#### 사설 IP (Private IP)

**정의**
- 내부 네트워크에서만 사용되는 IP 주소
- 인터넷에 직접 연결할 수 없는 주소
- RFC 1918에서 정의된 특별한 주소 대역

**사설 IP 주소 대역**
```
Class A: 10.0.0.0 ~ 10.255.255.255
Class B: 172.16.0.0 ~ 172.31.255.255
Class C: 192.168.0.0 ~ 192.168.255.255
```

**특징**
1. **재사용성**
   - 다른 네트워크에서 동일한 IP 대역 사용 가능
   - 내부 네트워크에서 자유로운 주소 할당

2. **보안성**
   - 외부에서 직접 접근 불가
   - 내부 네트워크 구조 은닉

3. **비용**
   - 무료로 사용 가능
   - 자유로운 주소 할당과 변경

#### NAT (Network Address Translation)

**개념**
- 사설 IP를 공인 IP로 변환하는 기술
- 하나의 공인 IP로 여러 사설 IP 기기의 인터넷 접속 지원

**동작 방식**
```ascii
[내부 네트워크]              [NAT 장비]              [인터넷]
사설 IP                     주소 변환                공인 IP
192.168.1.10:3000  →  203.0.113.1:40000  →  웹 서버
192.168.1.11:3001  →  203.0.113.1:40001  →  웹 서버
```

**NAT의 종류**
1. **Static NAT**
   - 1:1 고정 매핑
   - 서버 운영 시 주로 사용

2. **Dynamic NAT**
   - 동적 매핑
   - 공인 IP 풀에서 자동 할당

3. **PAT (Port Address Translation)**
   - 포트 번호를 이용한 다중 접속 지원
   - 가장 일반적으로 사용되는 방식

#### 실무 활용 사례

1. **기업 네트워크 구성**
   ```
   인터넷 ─── [공인 IP] 방화벽/라우터 [사설 IP] ─── 내부 네트워크
                                                  ├─ 업무용 PC
                                                  ├─ 프린터
                                                  └─ 내부 서버
   ```

2. **가정용 네트워크**
   ```
   인터넷 ─── [공인 IP] 공유기 [사설 IP] ─── 가정 내 기기
                                          ├─ 스마트폰
                                          ├─ 노트북
                                          └─ IoT 기기
   ```

3. **서버 환경 구성**
   ```
   [프록시/로드밸런서]
   공인 IP
        │
        ├─ [웹 서버 1] 사설 IP
        ├─ [웹 서버 2] 사설 IP
        └─ [웹 서버 3] 사설 IP
   ```

> 💡 **Point**  
> - 내부 네트워크 설계 시 적절한 사설 IP 대역 선택
> - NAT 설정 시 보안과 성능 고려
> - 서버 운영 시 고정 NAT 설정 필요

#### 장단점 비교

| 구분 | 공인 IP | 사설 IP |
|------|---------|---------|
| 비용 | 유료 | 무료 |
| 보안성 | 직접 노출 (위험) | 간접 노출 (안전) |
| 접근성 | 직접 접근 가능 | NAT 필요 |
| 관리 | 엄격한 관리 필요 | 자유로운 관리 |
| 용도 | 서버, 공개 서비스 | 내부 네트워크 |

### 서브넷과 서브넷 마스크

네트워크를 효율적으로 관리하고 보안을 강화하기 위해 큰 네트워크를 작은 네트워크로 분할하는 서브네팅(Subnetting)은 필수적인 기술입니다.

#### 서브넷(Subnet)

**정의**
- IP 네트워크의 논리적인 분할
- 동일한 네트워크 프리픽스를 공유하는 IP 주소들의 그룹
- 네트워크의 효율적인 관리를 위한 단위

**목적**
1. **네트워크 관리 효율성**
   - 트래픽 관리 용이
   - 장애 영역 격리
   - 보안 정책 적용 단순화

2. **주소 공간 효율적 사용**
   - 조직의 규모에 맞는 주소 할당
   - IP 주소 낭비 방지
   - 확장성 고려한 설계

#### 서브넷 마스크(Subnet Mask)

**정의**
- IP 주소에서 네트워크 부분과 호스트 부분을 구분하는 값
- 32비트 이진수로 표현
- 연속된 1과 0으로 구성

**표기 방식**
```
1. 점 표기법 (Dotted Decimal)
   255.255.255.0

2. CIDR 표기법
   /24 (앞에서부터 1의 개수)

예시:
192.168.1.0/24 = 192.168.1.0 255.255.255.0
```

#### 서브넷 계산

**기본 공식**
```
사용 가능한 호스트 수 = 2^n - 2
(n은 호스트 비트 수, 2를 빼는 이유는 네트워크 주소와 브로드캐스트 주소)

예시: /24 네트워크
호스트 비트 = 8
사용 가능한 호스트 = 2^8 - 2 = 254
```

**주요 서브넷 마스크와 호스트 수**
```
/24 (255.255.255.0)   → 254개 호스트
/25 (255.255.255.128) → 126개 호스트
/26 (255.255.255.192) → 62개 호스트
/27 (255.255.255.224) → 30개 호스트
/28 (255.255.255.240) → 14개 호스트
```

#### 서브넷 설계 예시

**중소기업 네트워크 구성**
```
본사 사무실 (필요 IP: 100개)
192.168.1.0/25 (126개 호스트)
├─ 사무직원 PC
├─ 프린터
└─ 회의실 장비

개발팀 (필요 IP: 50개)
192.168.1.128/26 (62개 호스트)
├─ 개발자 PC
├─ 테스트 서버
└─ 개발 장비

서버실 (필요 IP: 20개)
192.168.1.192/27 (30개 호스트)
├─ 웹 서버
├─ DB 서버
└─ 백업 서버
```

#### VLSM (Variable Length Subnet Mask)

**개념**
- 서로 다른 길이의 서브넷 마스크 사용
- 네트워크 크기에 따라 유연하게 서브넷 구성
- IP 주소 공간의 효율적 사용

**적용 예시**
```
회사 전체 네트워크: 172.16.0.0/16

대규모 부서: /20 (4094 호스트)
중규모 부서: /22 (1022 호스트)
소규모 부서: /24 (254 호스트)
관리용 네트워크: /28 (14 호스트)
```

#### 실무 적용 시 고려사항

1. **성장성**
   - 향후 확장을 고려한 여유 공간 확보
   - 단계적 확장이 가능한 설계
   - 주소 재할당 최소화

2. **보안**
   - 부서별/기능별 네트워크 분리
   - 접근 제어 용이성
   - 트래픽 모니터링 효율성

3. **관리 효율성**
   - 직관적인 주소 체계
   - 문서화와 관리의 용이성
   - 트러블슈팅 편의성

> 💡 **Point**  
> - 조직의 규모와 특성에 맞는 서브넷 설계
> - 향후 확장성을 고려한 주소 공간 할당
> - 체계적인 문서화와 관리 계획 수립

#### 서브네팅 실습 예제

**문제**: 192.168.10.0/24 네트워크를 4개의 동일한 크기의 서브넷으로 분할

**해결 과정**:
```
1. 필요한 서브넷 수: 4개
   → 2비트 필요 (2^2 = 4)
   → 서브넷 마스크는 /26 (255.255.255.192)

2. 각 서브넷:
   1번: 192.168.10.0/26   (0-63)
   2번: 192.168.10.64/26  (64-127)
   3번: 192.168.10.128/26 (128-191)
   4번: 192.168.10.192/26 (192-255)

3. 각 서브넷당:
   - 사용 가능한 호스트: 62개
   - 네트워크 주소: 첫 번째 주소
   - 브로드캐스트 주소: 마지막 주소
```

### DNS와 작동 원리

DNS(Domain Name System)는 사람이 이해하기 쉬운 도메인 이름을 컴퓨터가 이해할 수 있는 IP 주소로 변환하는 시스템입니다.

#### DNS의 필요성

1. **사용자 편의성**
   - IP 주소(예: 192.168.1.1) 대신 도메인 이름(예: www.example.com) 사용
   - 서비스 이전 시 IP 변경에도 동일한 도메인 사용 가능
   - 직관적인 주소 체계로 웹사이트 접근 용이

2. **시스템 유연성**
   - 로드 밸런싱을 통한 부하 분산
   - 지역별 최적화된 서버 연결
   - 서비스 가용성 향상

#### DNS 구조

**계층적 도메인 구조**
```
                    루트(.)
                       │
           ┌──────────┴──────────┐
        com                     org
          │                      │
    ┌─────┴─────┐         ┌─────┴─────┐
example      google    wikipedia    apache
   │           │           │          │
www         mail        blog        www
```

**도메인 레벨**
```
www    .   example   .   com   .
(SLD)     (Domain)     (TLD)  (Root)
```

#### DNS 레코드 유형

1. **주요 레코드**
   ```
   A     : 도메인 → IPv4 주소
   AAAA  : 도메인 → IPv6 주소
   CNAME : 도메인 별칭
   MX    : 메일 서버
   NS    : 네임서버
   TXT   : 텍스트 정보
   SOA   : 권한 시작 레코드
   ```

2. **레코드 예시**
   ```
   # A 레코드
   example.com.     IN  A     192.0.2.1
   
   # CNAME 레코드
   www.example.com. IN  CNAME example.com.
   
   # MX 레코드
   example.com.     IN  MX    10 mail.example.com.
   ```

#### DNS 질의 과정

**반복적 질의 (Iterative Query)**
```
1. 클라이언트 → 로컬 DNS 서버
   "www.example.com의 IP 주소는?"

2. 로컬 DNS → 루트 DNS 서버
   "com 도메인의 DNS 서버는?"

3. 로컬 DNS → com DNS 서버
   "example.com의 DNS 서버는?"

4. 로컬 DNS → example.com DNS 서버
   "www.example.com의 IP 주소는?"

5. 응답을 클라이언트에게 전달
```

**재귀적 질의 (Recursive Query)**
```
클라이언트 → 로컬 DNS 서버 → 루트 DNS 서버
                            ↓
                         com DNS 서버
                            ↓
                      example.com DNS 서버
                            ↓
                         최종 응답
```

#### DNS 캐싱과 TTL

**캐싱의 목적**
- DNS 쿼리 횟수 감소
- 응답 시간 단축
- 네트워크 트래픽 감소

**TTL(Time To Live)**
```
example.com.    IN  A     192.0.2.1    TTL=3600
                                       (1시간 동안 캐시)
```

#### DNS 보안

1. **DNSSEC**
   - DNS 응답의 무결성과 출처 인증
   - DNS 캐시 포이즈닝 방지
   - 디지털 서명을 통한 검증

2. **보안 위협**
   ```
   DNS 스푸핑
   DNS 캐시 포이즈닝
   DNS 증폭 공격
   도메인 하이재킹
   ```


## 4. TCP와 UDP

### TCP의 특징과 작동 방식

TCP(Transmission Control Protocol)는 신뢰성 있는 데이터 전송을 보장하는 연결 지향적 프로토콜입니다.

#### TCP의 핵심 특징

1. **연결 지향성 (Connection-Oriented)**
   - 데이터 전송 전 연결 수립 필요 (3-way handshake)
   - 양방향 통신(Full-duplex) 지원
   - 연결 종료 시 명시적 절차 수행 (4-way handshake)

2. **신뢰성 (Reliability)**
   - 데이터 전송 보장
   - 순서 보장 (Sequence Number 사용)
   - 오류 검출 및 재전송
   - 흐름 제어와 혼잡 제어

3. **바이트 스트림 (Byte Stream)**
   - 데이터를 연속적인 바이트 스트림으로 처리
   - 메시지 경계를 구분하지 않음
   - 애플리케이션이 데이터 경계 관리 필요

#### TCP 헤더 구조
```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |       Destination Port        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Sequence Number                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Acknowledgment Number                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Data |           |U|A|P|R|S|F|                               |
| Offset| Reserved  |R|C|S|S|Y|I|            Window             |
|       |           |G|K|H|T|N|N|                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Checksum            |         Urgent Pointer        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Options                    |    Padding    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                             data                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

#### TCP 연결 관리

**1. 3-way handshake (연결 수립)**
```
[클라이언트]                [서버]
     |                        |
     |------- SYN(x) ------->|
     |                        |
     |<--- SYN(y)+ACK(x+1) --|
     |                        |
     |------ ACK(y+1) ------>|
     |                        |
```

**2. 4-way handshake (연결 종료)**
```
[클라이언트]                [서버]
     |                        |
     |------- FIN(x) ------->|
     |                        |
     |<------ ACK(x+1) ------|
     |                        |
     |<------ FIN(y) --------|
     |                        |
     |------ ACK(y+1) ------>|
     |                        |
```

#### TCP의 신뢰성 보장 메커니즘

1. **흐름 제어 (Flow Control)**
   - 수신자의 처리 속도에 맞춘 데이터 전송
   - 슬라이딩 윈도우 프로토콜 사용
   - 수신 버퍼 오버플로우 방지

2. **혼잡 제어 (Congestion Control)**
   - 네트워크 상황에 따른 데이터 전송량 조절
   - 주요 알고리즘:
     - Slow Start
     - Congestion Avoidance
     - Fast Retransmit
     - Fast Recovery

3. **오류 제어 (Error Control)**
   - 체크섬을 통한 오류 검출
   - ACK와 타임아웃 기반 재전송
   - 중복 데이터 처리

### UDP의 특징과 사용 사례

UDP(User Datagram Protocol)는 단순하고 빠른 데이터 전송을 위한 비연결형 프로토콜입니다.

#### UDP의 핵심 특징

1. **비연결성 (Connectionless)**
   - 연결 설정 없이 즉시 데이터 전송
   - 각 패킷이 독립적으로 처리
   - 상태 정보 유지 불필요

2. **신뢰성 없음 (Unreliable)**
   - 데이터 전송 보장 없음
   - 순서 보장 없음
   - 흐름 제어 없음
   - 혼잡 제어 없음

3. **데이터그램 지향 (Datagram-Oriented)**
   - 메시지 경계 구분
   - 각 데이터그램이 독립적
   - 간단한 헤더 구조

#### UDP 헤더 구조
```
 0      7 8     15 16    23 24    31
+--------+--------+--------+--------+
|     Source      |   Destination   |
|      Port       |      Port       |
+--------+--------+--------+--------+
|     Length      |    Checksum     |
+--------+--------+--------+--------+
|                                   |
|              data                 |
|                                   |
+-----------------------------------+
```

#### UDP 사용 사례

1. **실시간 스트리밍**
   - 실시간 음성/영상 통화
   - 라이브 스트리밍
   - 온라인 게임

2. **DNS 쿼리**
   - 빠른 도메인 이름 조회
   - 단순한 요청-응답 구조

3. **IoT 디바이스**
   - 센서 데이터 전송
   - 리소스 제한적인 환경

### TCP vs UDP 비교

#### 주요 차이점

| 특성 | TCP | UDP |
|------|-----|-----|
| 연결 방식 | 연결 지향적 | 비연결형 |
| 신뢰성 | 높음 | 낮음 |
| 순서 보장 | O | X |
| 속도 | 상대적으로 느림 | 빠름 |
| 헤더 크기 | 20-60 bytes | 8 bytes |
| 흐름/혼잡 제어 | O | X |
| 용도 | 신뢰성 중요 | 속도 중요 |

#### 프로토콜 선택 기준

1. **TCP 선택 시나리오**
   - 데이터 무결성이 중요한 경우
   - 순서가 중요한 데이터 전송
   - 파일 전송, 웹 브라우징
   - 이메일, 원격 접속

2. **UDP 선택 시나리오**
   - 실시간성이 중요한 경우
   - 일부 데이터 손실 허용
   - 브로드캐스트/멀티캐스트
   - 간단한 요청-응답

> **면접 대비 포인트**  
> 1. TCP의 연결 수립/해제 과정 설명 가능
> 2. 신뢰성 보장을 위한 메커니즘 이해
> 3. UDP가 더 적합한 사용 사례 제시
> 4. 실무에서의 프로토콜 선택 기준 설명

#### 실무 적용 사례

1. **웹 서비스**
   ```
   HTTP/HTTPS → TCP
   WebRTC → UDP + 자체 신뢰성 메커니즘
   ```

2. **게임 서버**
   ```
   게임 상태 동기화 → TCP
   실시간 위치 정보 → UDP
   ```

3. **스트리밍 서비스**
   ```
   제어 신호 → TCP
   미디어 스트림 → UDP (RTP/RTCP)
   ```